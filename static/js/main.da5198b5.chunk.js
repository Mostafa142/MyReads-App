(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,c){},18:function(e,t,c){},20:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),o=c(10),a=c.n(o),r=(c(16),c(9)),i=c.n(r),l=c(11),h=c(4),j=(c(18),c(5)),b=c(2),d=c(1),u=function(e){var t=e.book,c=e.book.shelf;return console.log(t),Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.smallThumbnail,")"):"url('https://images.unsplash.com/photo-1604147706283-d7119b5b822c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1287&q=80')"}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{onChange:function(c){e.changeShelf(t,c.target.value)},value:c||"none",children:[Object(d.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:t.title}),Object(d.jsx)("div",{className:"book-authors",children:t.authors})]})})},f=function(e){var t=e.shelfTitle,c=e.books,n=e.category,s=c.filter((function(e){return e.shelf===n})),o=e.changeShelf;return Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:t}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:s.map((function(e){return Object(d.jsx)(u,{book:e,changeShelf:o},e.id)}))})})]})},O=function(e){var t=e.booksList,c=e.changeShelf;return Object(d.jsxs)("div",{className:"list-books",children:[Object(d.jsx)("div",{className:"list-books-title",children:Object(d.jsx)("h1",{children:"MyReads"})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{shelfTitle:"Currently Reading",books:t,category:"currentlyReading",changeShelf:c}),Object(d.jsx)(f,{shelfTitle:"Want to Read",books:t,category:"wantToRead",changeShelf:c}),Object(d.jsx)(f,{shelfTitle:"Read",books:t,category:"read",changeShelf:c})]})}),Object(d.jsx)("div",{className:"open-search",children:Object(d.jsx)(j.b,{to:"/search",children:"Add a book"})})]})},x=function(e){return Object(d.jsx)("div",{className:"search-books-results",children:Object(d.jsx)("ol",{className:"books-grid",children:e.searchBooks.map((function(t){return Object(d.jsx)(u,{book:t,changeShelf:e.changeShelf},t.id)}))})})},k=function(e){var t=e.changeShelf;return Object(d.jsxs)("div",{className:"search-books",children:[Object(d.jsxs)("div",{className:"search-books-bar",children:[Object(d.jsx)(j.b,{to:"/",className:"close-search",children:"Close"}),Object(d.jsx)("div",{className:"search-books-input-wrapper",children:Object(d.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:e.value,onChange:e.handleSearch})})]}),Object(d.jsx)(x,{searchBooks:e.searchBooks,changeShelf:t})]})},p=c(6),g="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:m},S=function(){return fetch("".concat(g,"/books"),{headers:v}).then((function(e){return e.json()})).then((function(e){return e.books}))},y=function(e,t){return fetch("".concat(g,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)(Object(p.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},N=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),c=t[0],s=t[1],o=Object(n.useState)(""),a=Object(h.a)(o,2),r=a[0],u=a[1],f=Object(n.useState)([]),x=Object(h.a)(f,2),m=x[0],N=x[1];Object(n.useEffect)((function(){S().then((function(e){s(e)}))}),[]);var w=function(){var e=Object(l.a)(i.a.mark((function e(t,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,c);case 2:return e.next=4,S().then((function(e){s(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=!0;return r&&function(e,t){return fetch("".concat(g,"/search"),{method:"POST",headers:Object(p.a)(Object(p.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(r).then((function(t){t.error?console.log(t):e&&(N(t),console.log(t))})),function(){e=!1,N([])}}),[r]),Object(d.jsx)(j.a,{children:Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)(b.c,{children:[Object(d.jsx)(b.a,{path:"/",element:Object(d.jsx)(O,{booksList:c,changeShelf:w})}),Object(d.jsx)(b.a,{path:"/search",element:Object(d.jsx)(k,{value:r,handleSearch:function(e){u(e.target.value)},changeShelf:w,searchBooks:m})})]})})})};a.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(N,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.da5198b5.chunk.js.map